#!/usr/bin/env python3
import sys
import os
sys.path.append(os.path.dirname(os.path.dirname(os.path.realpath(__file__))))
import pseudon


def z():
    if len(sys.argv) == 1:
        print('pseudon-python <filename>')
        return

    filename = sys.argv[1]
    with open(filename, 'r') as f:
        source = f.read()
    clj = pseudon.translate(source)
    base = filename.rpartition('.')[0]
    with open('%s.pseudon.yaml' % base, 'w') as f:
        f.write(clj)

if __name__ == '__main__':
    z()
